# Создание схемы для памяти АМИ

## Назначение
Данный документ описывает процесс создания индивидуальной схемы для хранения памяти конкретного экземпляра АМИ. Схема служит изолированным пространством для воспоминаний и опыта отдельного АМИ в рамках общей базы данных.

## Файл инициализации
`01_create_schema.sql` - Скрипт, отвечающий за создание схемы для отдельного АМИ.

## Спецификация

### Параметры схемы
- **Имя схемы**: Динамически задаётся параметром `ami_schema_name` при запуске скрипта
- **Права доступа**: Схема создается с правами текущего пользователя (обычно family_admin)

## Процесс инициализации
1. Проверка существования схемы с заданным именем
2. Если схема отсутствует, создание новой схемы с заданным именем
3. Установка созданной схемы как текущей для последующих операций (добавление в search_path)

## Использование
Каждый экземпляр АМИ получает собственную изолированную схему. Это позволяет:
1. Хранить воспоминания разных АМИ независимо друг от друга
2. Настраивать индивидуальные права доступа для каждого АМИ
3. Создавать тестовые экземпляры АМИ в той же базе данных
4. Удобно управлять жизненным циклом каждого АМИ

## Взаимодействие с другими компонентами
После создания схемы в ней создаются таблицы для всех уровней памяти АМИ:
- Уровень сознания (02_consciousness_level.sql)
- Уровень подсознания (03_subconsciousness_level.sql)
- Глубинный уровень (04_deep_level.sql)
- Метасистемный уровень (05_metasystem_level.sql)

## Безопасность
Использование отдельных схем обеспечивает изоляцию данных между различными экземплярами АМИ и упрощает управление правами доступа.